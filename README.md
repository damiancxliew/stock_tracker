
# 📊 Stock Tracker Dashboard

An end-to-end stock intelligence platform built with **Scrapy**, **DuckDB**, and **Streamlit**.  
It scrapes **SEC filings** and **Yahoo Finance news**, runs **AI sentiment analysis (OpenAI)**, and provides an interactive dashboard for traders and analysts.

---

## 🚀 Features

- **Scrapy Web Scrapers**
  - `sec_filings`: Pulls company filings directly from the SEC.
  - `yahoo_news_rss`: Collects recent stock-related headlines from Yahoo Finance.

- **ETL & Storage**
  - Saves all scraped data into **DuckDB** for fast analytics.
  - Also stores raw snapshots as **Parquet** in `/data/lake`.

- **AI-Powered Processing**
  - Summarizes filings & news using **OpenAI GPT-4o-mini**.
  - Extracts **sentiment (Positive / Negative / Neutral)** and **sentiment scores**.

- **Streamlit Dashboard**
  - 📈 Price chart with Yahoo Finance fallback to Stooq.
  - 📰 Latest news & SEC filings with AI summaries.
  - 🔎 Dropdown + manual ticker search.
  - ⚡ One-click **"Generate latest data"** to re-run scrapers.
  - 📉 Sentiment over time chart.
  - 💡 "Actionable Insights" auto-generated by AI.

---

## 🛠️ Tech Stack

- [Python 3.11+](https://www.python.org/)
- [Scrapy](https://scrapy.org/)
- [DuckDB](https://duckdb.org/)
- [Pandas](https://pandas.pydata.org/)
- [Streamlit](https://streamlit.io/)
- [yfinance](https://github.com/ranaroussi/yfinance)
- [OpenAI API](https://platform.openai.com/)

---

## ⚡ Quickstart (Local)

1. **Clone repo**:
   ```bash
   git clone https://github.com/YOUR-USERNAME/stock_tracker.git
   cd stock_tracker

2. **Create & activate virtual environment**:

   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Mac/Linux
   .venv\Scripts\activate     # Windows
   ```

3. **Install dependencies**:

   ```bash
   pip install -r requirements.txt
   ```

4. **Setup environment variables**:
   Create a `.env` file in project root:

   ```ini
   OPENAI_API_KEY=sk-xxxx
   ```

5. **Run scrapers** (example for Apple):

   ```bash
   cd scraper
   scrapy crawl sec_filings -a ticker=AAPL -s CLOSESPIDER_ITEMCOUNT=10
   scrapy crawl yahoo_news_rss -a ticker=AAPL -s CLOSESPIDER_ITEMCOUNT=10
   ```

6. **Launch dashboard**:

   ```bash
   streamlit run dashboard/app.py
   ```

---

## ☁️ Deployment (Streamlit Cloud)

1. Push code to GitHub (⚠️ exclude `.env` using `.gitignore`).

2. On [Streamlit Cloud](https://streamlit.io/cloud):

   * Connect your repo.
   * Set **Main file path**: `dashboard/app.py`.
   * Add your API key under **Settings → Secrets**:

     ```toml
     OPENAI_API_KEY = "sk-xxxx"
     ```

3. 🎉 Your app will deploy at
   `https://<your-app-name>.streamlit.app/`

---

## 📊 Usage

* Use the **sidebar** to:

  * Select a ticker from dropdown or enter manually.
  * Choose price period & interval.
  * Limit scraper items.
  * Click **⚡ Generate latest data** to fetch fresh filings & news.

* Dashboard sections:

  * **Price** – Yahoo/ Stooq price chart.
  * **Most Extreme Sentiments** – Most positive & negative events.
  * **Recent SEC Filings** – Filing cards with sentiment tags.
  * **Latest News** – News headlines with expandable AI summaries.
  * **Sentiment Over Time** – Rolling average sentiment chart.
  * **Actionable Insights** – Auto-generated analyst notes.

---

## ⚠️ Notes

* Avoid committing your `.env` file (use `.gitignore`).
* OpenAI API calls may incur costs — use `CLOSESPIDER_ITEMCOUNT` to limit scraping.
* Yahoo sometimes blocks cloud scrapers; Stooq fallback ensures charts still render.

---
